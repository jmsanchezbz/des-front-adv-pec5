{"ast":null,"code":"import _asyncToGenerator from \"/home/jose/workspace/uoc/des-front-adv/pec4/sol-pec2-obs-blog-uoc-project-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nfunction cov_2i1ngy9cuf() {\n  var path = \"/home/jose/workspace/uoc/des-front-adv/pec4/sol-pec2-obs-blog-uoc-project-front/src/app/Components/login/login.component.ts\";\n  var hash = \"7d7652b637d5d56075aa5a975a7794b59c28682c\";\n  var global = new Function(\"return this\")();\n  var gcv = \"__coverage__\";\n  var coverageData = {\n    path: \"/home/jose/workspace/uoc/des-front-adv/pec4/sol-pec2-obs-blog-uoc-project-front/src/app/Components/login/login.component.ts\",\n    statementMap: {\n      \"0\": {\n        start: {\n          line: 13,\n          column: 21\n        },\n        end: {\n          line: 80,\n          column: 1\n        }\n      },\n      \"1\": {\n        start: {\n          line: 15,\n          column: 8\n        },\n        end: {\n          line: 15,\n          column: 39\n        }\n      },\n      \"2\": {\n        start: {\n          line: 16,\n          column: 8\n        },\n        end: {\n          line: 16,\n          column: 39\n        }\n      },\n      \"3\": {\n        start: {\n          line: 17,\n          column: 8\n        },\n        end: {\n          line: 17,\n          column: 43\n        }\n      },\n      \"4\": {\n        start: {\n          line: 18,\n          column: 8\n        },\n        end: {\n          line: 18,\n          column: 53\n        }\n      },\n      \"5\": {\n        start: {\n          line: 19,\n          column: 8\n        },\n        end: {\n          line: 19,\n          column: 55\n        }\n      },\n      \"6\": {\n        start: {\n          line: 20,\n          column: 8\n        },\n        end: {\n          line: 20,\n          column: 29\n        }\n      },\n      \"7\": {\n        start: {\n          line: 21,\n          column: 8\n        },\n        end: {\n          line: 21,\n          column: 53\n        }\n      },\n      \"8\": {\n        start: {\n          line: 22,\n          column: 8\n        },\n        end: {\n          line: 25,\n          column: 11\n        }\n      },\n      \"9\": {\n        start: {\n          line: 26,\n          column: 8\n        },\n        end: {\n          line: 30,\n          column: 11\n        }\n      },\n      \"10\": {\n        start: {\n          line: 31,\n          column: 8\n        },\n        end: {\n          line: 34,\n          column: 11\n        }\n      },\n      \"11\": {\n        start: {\n          line: 38,\n          column: 25\n        },\n        end: {\n          line: 38,\n          column: 30\n        }\n      },\n      \"12\": {\n        start: {\n          line: 40,\n          column: 8\n        },\n        end: {\n          line: 40,\n          column: 48\n        }\n      },\n      \"13\": {\n        start: {\n          line: 41,\n          column: 8\n        },\n        end: {\n          line: 41,\n          column: 54\n        }\n      },\n      \"14\": {\n        start: {\n          line: 42,\n          column: 8\n        },\n        end: {\n          line: 70,\n          column: 11\n        }\n      },\n      \"15\": {\n        start: {\n          line: 45,\n          column: 12\n        },\n        end: {\n          line: 45,\n          column: 97\n        }\n      },\n      \"16\": {\n        start: {\n          line: 46,\n          column: 12\n        },\n        end: {\n          line: 53,\n          column: 13\n        }\n      },\n      \"17\": {\n        start: {\n          line: 47,\n          column: 35\n        },\n        end: {\n          line: 50,\n          column: 17\n        }\n      },\n      \"18\": {\n        start: {\n          line: 51,\n          column: 16\n        },\n        end: {\n          line: 51,\n          column: 74\n        }\n      },\n      \"19\": {\n        start: {\n          line: 52,\n          column: 16\n        },\n        end: {\n          line: 52,\n          column: 50\n        }\n      },\n      \"20\": {\n        start: {\n          line: 56,\n          column: 12\n        },\n        end: {\n          line: 56,\n          column: 30\n        }\n      },\n      \"21\": {\n        start: {\n          line: 57,\n          column: 12\n        },\n        end: {\n          line: 57,\n          column: 50\n        }\n      },\n      \"22\": {\n        start: {\n          line: 58,\n          column: 12\n        },\n        end: {\n          line: 58,\n          column: 60\n        }\n      },\n      \"23\": {\n        start: {\n          line: 59,\n          column: 12\n        },\n        end: {\n          line: 59,\n          column: 76\n        }\n      },\n      \"24\": {\n        start: {\n          line: 60,\n          column: 12\n        },\n        end: {\n          line: 60,\n          column: 86\n        }\n      },\n      \"25\": {\n        start: {\n          line: 62,\n          column: 12\n        },\n        end: {\n          line: 62,\n          column: 31\n        }\n      },\n      \"26\": {\n        start: {\n          line: 63,\n          column: 12\n        },\n        end: {\n          line: 63,\n          column: 40\n        }\n      },\n      \"27\": {\n        start: {\n          line: 64,\n          column: 31\n        },\n        end: {\n          line: 67,\n          column: 13\n        }\n      },\n      \"28\": {\n        start: {\n          line: 68,\n          column: 12\n        },\n        end: {\n          line: 68,\n          column: 70\n        }\n      },\n      \"29\": {\n        start: {\n          line: 69,\n          column: 12\n        },\n        end: {\n          line: 69,\n          column: 53\n        }\n      },\n      \"30\": {\n        start: {\n          line: 72,\n          column: 13\n        },\n        end: {\n          line: 79,\n          column: 6\n        }\n      },\n      \"31\": {\n        start: {\n          line: 72,\n          column: 41\n        },\n        end: {\n          line: 79,\n          column: 5\n        }\n      },\n      \"32\": {\n        start: {\n          line: 81,\n          column: 0\n        },\n        end: {\n          line: 87,\n          column: 19\n        }\n      }\n    },\n    fnMap: {\n      \"0\": {\n        name: \"(anonymous_0)\",\n        decl: {\n          start: {\n            line: 14,\n            column: 4\n          },\n          end: {\n            line: 14,\n            column: 5\n          }\n        },\n        loc: {\n          start: {\n            line: 14,\n            column: 106\n          },\n          end: {\n            line: 35,\n            column: 5\n          }\n        },\n        line: 14\n      },\n      \"1\": {\n        name: \"(anonymous_1)\",\n        decl: {\n          start: {\n            line: 36,\n            column: 4\n          },\n          end: {\n            line: 36,\n            column: 5\n          }\n        },\n        loc: {\n          start: {\n            line: 36,\n            column: 15\n          },\n          end: {\n            line: 36,\n            column: 18\n          }\n        },\n        line: 36\n      },\n      \"2\": {\n        name: \"(anonymous_2)\",\n        decl: {\n          start: {\n            line: 37,\n            column: 4\n          },\n          end: {\n            line: 37,\n            column: 5\n          }\n        },\n        loc: {\n          start: {\n            line: 37,\n            column: 12\n          },\n          end: {\n            line: 71,\n            column: 5\n          }\n        },\n        line: 37\n      },\n      \"3\": {\n        name: \"(anonymous_3)\",\n        decl: {\n          start: {\n            line: 44,\n            column: 27\n          },\n          end: {\n            line: 44,\n            column: 28\n          }\n        },\n        loc: {\n          start: {\n            line: 44,\n            column: 39\n          },\n          end: {\n            line: 54,\n            column: 9\n          }\n        },\n        line: 44\n      },\n      \"4\": {\n        name: \"(anonymous_4)\",\n        decl: {\n          start: {\n            line: 55,\n            column: 23\n          },\n          end: {\n            line: 55,\n            column: 24\n          }\n        },\n        loc: {\n          start: {\n            line: 55,\n            column: 33\n          },\n          end: {\n            line: 61,\n            column: 9\n          }\n        },\n        line: 55\n      },\n      \"5\": {\n        name: \"(anonymous_5)\",\n        decl: {\n          start: {\n            line: 61,\n            column: 11\n          },\n          end: {\n            line: 61,\n            column: 12\n          }\n        },\n        loc: {\n          start: {\n            line: 61,\n            column: 22\n          },\n          end: {\n            line: 70,\n            column: 9\n          }\n        },\n        line: 61\n      },\n      \"6\": {\n        name: \"(anonymous_6)\",\n        decl: {\n          start: {\n            line: 72,\n            column: 35\n          },\n          end: {\n            line: 72,\n            column: 36\n          }\n        },\n        loc: {\n          start: {\n            line: 72,\n            column: 41\n          },\n          end: {\n            line: 79,\n            column: 5\n          }\n        },\n        line: 72\n      }\n    },\n    branchMap: {\n      \"0\": {\n        loc: {\n          start: {\n            line: 46,\n            column: 12\n          },\n          end: {\n            line: 53,\n            column: 13\n          }\n        },\n        type: \"if\",\n        locations: [{\n          start: {\n            line: 46,\n            column: 12\n          },\n          end: {\n            line: 53,\n            column: 13\n          }\n        }, {\n          start: {\n            line: undefined,\n            column: undefined\n          },\n          end: {\n            line: undefined,\n            column: undefined\n          }\n        }],\n        line: 46\n      }\n    },\n    s: {\n      \"0\": 0,\n      \"1\": 0,\n      \"2\": 0,\n      \"3\": 0,\n      \"4\": 0,\n      \"5\": 0,\n      \"6\": 0,\n      \"7\": 0,\n      \"8\": 0,\n      \"9\": 0,\n      \"10\": 0,\n      \"11\": 0,\n      \"12\": 0,\n      \"13\": 0,\n      \"14\": 0,\n      \"15\": 0,\n      \"16\": 0,\n      \"17\": 0,\n      \"18\": 0,\n      \"19\": 0,\n      \"20\": 0,\n      \"21\": 0,\n      \"22\": 0,\n      \"23\": 0,\n      \"24\": 0,\n      \"25\": 0,\n      \"26\": 0,\n      \"27\": 0,\n      \"28\": 0,\n      \"29\": 0,\n      \"30\": 0,\n      \"31\": 0,\n      \"32\": 0\n    },\n    f: {\n      \"0\": 0,\n      \"1\": 0,\n      \"2\": 0,\n      \"3\": 0,\n      \"4\": 0,\n      \"5\": 0,\n      \"6\": 0\n    },\n    b: {\n      \"0\": [0, 0]\n    },\n    inputSourceMap: {\n      version: 3,\n      file: \"login.component.js\",\n      sourceRoot: \"\",\n      sources: [\"/home/jose/workspace/uoc/des-front-adv/pec4/sol-pec2-obs-blog-uoc-project-front/src/app/Components/login/login.component.ts\"],\n      names: [],\n      mappings: \"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\",\n      sourcesContent: [\"import { HttpErrorResponse } from '@angular/common/http';\\nimport { Component, OnInit } from '@angular/core';\\nimport {\\n  UntypedFormBuilder,\\n  UntypedFormControl,\\n  UntypedFormGroup,\\n  Validators,\\n} from '@angular/forms';\\nimport { Router } from '@angular/router';\\nimport { finalize } from 'rxjs/operators';\\nimport { AuthDTO } from 'src/app/Models/auth.dto';\\nimport { HeaderMenus } from 'src/app/Models/header-menus.dto';\\nimport { AuthService, AuthToken } from 'src/app/Services/auth.service';\\nimport { HeaderMenusService } from 'src/app/Services/header-menus.service';\\nimport { LocalStorageService } from 'src/app/Services/local-storage.service';\\nimport { SharedService } from 'src/app/Services/shared.service';\\n\\n@Component({\\n  selector: 'app-login',\\n  templateUrl: './login.component.html',\\n  styleUrls: ['./login.component.scss'],\\n})\\nexport class LoginComponent implements OnInit {\\n  loginUser: AuthDTO;\\n  email: UntypedFormControl;\\n  password: UntypedFormControl;\\n  loginForm: UntypedFormGroup;\\n\\n  constructor(\\n    private formBuilder: UntypedFormBuilder,\\n    private authService: AuthService,\\n    private sharedService: SharedService,\\n    private headerMenusService: HeaderMenusService,\\n    private localStorageService: LocalStorageService,\\n    private router: Router\\n  ) {\\n    this.loginUser = new AuthDTO('', '', '', '');\\n\\n    this.email = new UntypedFormControl('', [\\n      Validators.required,\\n      Validators.pattern('[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$'),\\n    ]);\\n\\n    this.password = new UntypedFormControl('', [\\n      Validators.required,\\n      Validators.minLength(8),\\n      Validators.maxLength(16),\\n    ]);\\n\\n    this.loginForm = this.formBuilder.group({\\n      email: this.email,\\n      password: this.password,\\n    });\\n  }\\n\\n  ngOnInit(): void {}\\n\\n  login(): void {\\n    let responseOK: boolean = false;\\n    let errorResponse: any;\\n\\n    this.loginUser.email = this.email.value;\\n    this.loginUser.password = this.password.value;\\n\\n    this.authService\\n      .login(this.loginUser)\\n      .pipe(\\n        finalize(async () => {\\n          await this.sharedService.managementToast(\\n            'loginFeedback',\\n            responseOK,\\n            errorResponse\\n          );\\n\\n          if (responseOK) {\\n            const headerInfo: HeaderMenus = {\\n              showAuthSection: true,\\n              showNoAuthSection: false,\\n            };\\n            this.headerMenusService.headerManagement.next(headerInfo);\\n            this.router.navigateByUrl('home');\\n          }\\n        })\\n      )\\n      .subscribe(\\n        (resp: AuthToken) => {\\n          responseOK = true;\\n          this.loginUser.user_id = resp.user_id;\\n          this.loginUser.access_token = resp.access_token;\\n\\n          this.localStorageService.set('user_id', this.loginUser.user_id);\\n          this.localStorageService.set(\\n            'access_token',\\n            this.loginUser.access_token\\n          );\\n        },\\n        (error: HttpErrorResponse) => {\\n          responseOK = false;\\n          errorResponse = error.error;\\n          const headerInfo: HeaderMenus = {\\n            showAuthSection: false,\\n            showNoAuthSection: true,\\n          };\\n          this.headerMenusService.headerManagement.next(headerInfo);\\n\\n          this.sharedService.errorLog(error.error);\\n        }\\n      );\\n  }\\n}\\n\"]\n    },\n    _coverageSchema: \"1a1c01bbd47fc00a2c39e90264f33305004495a9\",\n    hash: \"7d7652b637d5d56075aa5a975a7794b59c28682c\"\n  };\n  var coverage = global[gcv] || (global[gcv] = {});\n  if (!coverage[path] || coverage[path].hash !== hash) {\n    coverage[path] = coverageData;\n  }\n  var actualCoverage = coverage[path];\n  {\n    // @ts-ignore\n    cov_2i1ngy9cuf = function () {\n      return actualCoverage;\n    };\n  }\n  return actualCoverage;\n}\ncov_2i1ngy9cuf();\nimport { __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./login.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./login.component.scss?ngResource\";\nimport { Component } from '@angular/core';\nimport { UntypedFormBuilder, UntypedFormControl, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { finalize } from 'rxjs/operators';\nimport { AuthDTO } from 'src/app/Models/auth.dto';\nimport { AuthService } from 'src/app/Services/auth.service';\nimport { HeaderMenusService } from 'src/app/Services/header-menus.service';\nimport { LocalStorageService } from 'src/app/Services/local-storage.service';\nimport { SharedService } from 'src/app/Services/shared.service';\ncov_2i1ngy9cuf().s[0]++;\nlet LoginComponent = (_class = class LoginComponent {\n  constructor(formBuilder, authService, sharedService, headerMenusService, localStorageService, router) {\n    cov_2i1ngy9cuf().f[0]++;\n    cov_2i1ngy9cuf().s[1]++;\n    this.formBuilder = formBuilder;\n    cov_2i1ngy9cuf().s[2]++;\n    this.authService = authService;\n    cov_2i1ngy9cuf().s[3]++;\n    this.sharedService = sharedService;\n    cov_2i1ngy9cuf().s[4]++;\n    this.headerMenusService = headerMenusService;\n    cov_2i1ngy9cuf().s[5]++;\n    this.localStorageService = localStorageService;\n    cov_2i1ngy9cuf().s[6]++;\n    this.router = router;\n    cov_2i1ngy9cuf().s[7]++;\n    this.loginUser = new AuthDTO('', '', '', '');\n    cov_2i1ngy9cuf().s[8]++;\n    this.email = new UntypedFormControl('', [Validators.required, Validators.pattern('[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$')]);\n    cov_2i1ngy9cuf().s[9]++;\n    this.password = new UntypedFormControl('', [Validators.required, Validators.minLength(8), Validators.maxLength(16)]);\n    cov_2i1ngy9cuf().s[10]++;\n    this.loginForm = this.formBuilder.group({\n      email: this.email,\n      password: this.password\n    });\n  }\n  ngOnInit() {\n    cov_2i1ngy9cuf().f[1]++;\n  }\n  login() {\n    var _this = this;\n    cov_2i1ngy9cuf().f[2]++;\n    let responseOK = (cov_2i1ngy9cuf().s[11]++, false);\n    let errorResponse;\n    cov_2i1ngy9cuf().s[12]++;\n    this.loginUser.email = this.email.value;\n    cov_2i1ngy9cuf().s[13]++;\n    this.loginUser.password = this.password.value;\n    cov_2i1ngy9cuf().s[14]++;\n    this.authService.login(this.loginUser).pipe(finalize( /*#__PURE__*/_asyncToGenerator(function* () {\n      cov_2i1ngy9cuf().f[3]++;\n      cov_2i1ngy9cuf().s[15]++;\n      yield _this.sharedService.managementToast('loginFeedback', responseOK, errorResponse);\n      cov_2i1ngy9cuf().s[16]++;\n      if (responseOK) {\n        cov_2i1ngy9cuf().b[0][0]++;\n        const headerInfo = (cov_2i1ngy9cuf().s[17]++, {\n          showAuthSection: true,\n          showNoAuthSection: false\n        });\n        cov_2i1ngy9cuf().s[18]++;\n        _this.headerMenusService.headerManagement.next(headerInfo);\n        cov_2i1ngy9cuf().s[19]++;\n        _this.router.navigateByUrl('home');\n      } else {\n        cov_2i1ngy9cuf().b[0][1]++;\n      }\n    }))).subscribe(resp => {\n      cov_2i1ngy9cuf().f[4]++;\n      cov_2i1ngy9cuf().s[20]++;\n      responseOK = true;\n      cov_2i1ngy9cuf().s[21]++;\n      this.loginUser.user_id = resp.user_id;\n      cov_2i1ngy9cuf().s[22]++;\n      this.loginUser.access_token = resp.access_token;\n      cov_2i1ngy9cuf().s[23]++;\n      this.localStorageService.set('user_id', this.loginUser.user_id);\n      cov_2i1ngy9cuf().s[24]++;\n      this.localStorageService.set('access_token', this.loginUser.access_token);\n    }, error => {\n      cov_2i1ngy9cuf().f[5]++;\n      cov_2i1ngy9cuf().s[25]++;\n      responseOK = false;\n      cov_2i1ngy9cuf().s[26]++;\n      errorResponse = error.error;\n      const headerInfo = (cov_2i1ngy9cuf().s[27]++, {\n        showAuthSection: false,\n        showNoAuthSection: true\n      });\n      cov_2i1ngy9cuf().s[28]++;\n      this.headerMenusService.headerManagement.next(headerInfo);\n      cov_2i1ngy9cuf().s[29]++;\n      this.sharedService.errorLog(error.error);\n    });\n  }\n}, (() => {\n  cov_2i1ngy9cuf().s[30]++;\n  _class.ctorParameters = () => {\n    cov_2i1ngy9cuf().f[6]++;\n    cov_2i1ngy9cuf().s[31]++;\n    return [{\n      type: UntypedFormBuilder\n    }, {\n      type: AuthService\n    }, {\n      type: SharedService\n    }, {\n      type: HeaderMenusService\n    }, {\n      type: LocalStorageService\n    }, {\n      type: Router\n    }];\n  };\n})(), _class);\ncov_2i1ngy9cuf().s[32]++;\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], LoginComponent);\nexport { LoginComponent };","map":{"version":3,"names":["cov_2i1ngy9cuf","actualCoverage","Component","UntypedFormBuilder","UntypedFormControl","Validators","Router","finalize","AuthDTO","AuthService","HeaderMenusService","LocalStorageService","SharedService","s","LoginComponent","_class","constructor","formBuilder","authService","sharedService","headerMenusService","localStorageService","router","f","loginUser","email","required","pattern","password","minLength","maxLength","loginForm","group","ngOnInit","login","_this","responseOK","errorResponse","value","pipe","_asyncToGenerator","managementToast","b","headerInfo","showAuthSection","showNoAuthSection","headerManagement","next","navigateByUrl","subscribe","resp","user_id","access_token","set","error","errorLog","__decorate","selector","template","__NG_CLI_RESOURCE__0"],"sources":["/home/jose/workspace/uoc/des-front-adv/pec4/sol-pec2-obs-blog-uoc-project-front/src/app/Components/login/login.component.ts"],"sourcesContent":["import { HttpErrorResponse } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport {\n  UntypedFormBuilder,\n  UntypedFormControl,\n  UntypedFormGroup,\n  Validators,\n} from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { finalize } from 'rxjs/operators';\nimport { AuthDTO } from 'src/app/Models/auth.dto';\nimport { HeaderMenus } from 'src/app/Models/header-menus.dto';\nimport { AuthService, AuthToken } from 'src/app/Services/auth.service';\nimport { HeaderMenusService } from 'src/app/Services/header-menus.service';\nimport { LocalStorageService } from 'src/app/Services/local-storage.service';\nimport { SharedService } from 'src/app/Services/shared.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss'],\n})\nexport class LoginComponent implements OnInit {\n  loginUser: AuthDTO;\n  email: UntypedFormControl;\n  password: UntypedFormControl;\n  loginForm: UntypedFormGroup;\n\n  constructor(\n    private formBuilder: UntypedFormBuilder,\n    private authService: AuthService,\n    private sharedService: SharedService,\n    private headerMenusService: HeaderMenusService,\n    private localStorageService: LocalStorageService,\n    private router: Router\n  ) {\n    this.loginUser = new AuthDTO('', '', '', '');\n\n    this.email = new UntypedFormControl('', [\n      Validators.required,\n      Validators.pattern('[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$'),\n    ]);\n\n    this.password = new UntypedFormControl('', [\n      Validators.required,\n      Validators.minLength(8),\n      Validators.maxLength(16),\n    ]);\n\n    this.loginForm = this.formBuilder.group({\n      email: this.email,\n      password: this.password,\n    });\n  }\n\n  ngOnInit(): void {}\n\n  login(): void {\n    let responseOK: boolean = false;\n    let errorResponse: any;\n\n    this.loginUser.email = this.email.value;\n    this.loginUser.password = this.password.value;\n\n    this.authService\n      .login(this.loginUser)\n      .pipe(\n        finalize(async () => {\n          await this.sharedService.managementToast(\n            'loginFeedback',\n            responseOK,\n            errorResponse\n          );\n\n          if (responseOK) {\n            const headerInfo: HeaderMenus = {\n              showAuthSection: true,\n              showNoAuthSection: false,\n            };\n            this.headerMenusService.headerManagement.next(headerInfo);\n            this.router.navigateByUrl('home');\n          }\n        })\n      )\n      .subscribe(\n        (resp: AuthToken) => {\n          responseOK = true;\n          this.loginUser.user_id = resp.user_id;\n          this.loginUser.access_token = resp.access_token;\n\n          this.localStorageService.set('user_id', this.loginUser.user_id);\n          this.localStorageService.set(\n            'access_token',\n            this.loginUser.access_token\n          );\n        },\n        (error: HttpErrorResponse) => {\n          responseOK = false;\n          errorResponse = error.error;\n          const headerInfo: HeaderMenus = {\n            showAuthSection: false,\n            showNoAuthSection: true,\n          };\n          this.headerMenusService.headerManagement.next(headerInfo);\n\n          this.sharedService.errorLog(error.error);\n        }\n      );\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}